//CREACIÓN DE LA TABLA JUEGO

CREATE TABLE JUEGO(
CODJUE INT,
NOMBRE VARCHAR2(20),
STOCK INT,
PRECIO INT,
CODGEN INT,
CODPLA INT
);

//CREACIÓN DE LA TABLA PLATAFORMA

CREATE TABLE PLATAFORMA(
CODPLA INT,
NOMBRE VARCHAR2(20)
);

//CREACIÓN DE LA TABLA GENERO

CREATE TABLE GENERO(
CODGEN INT,
NOMBRE VARCHAR2(20)
);

//PK EN LA TABLA JUEGO

ALTER TABLE JUEGO
ADD CONSTRAINT PK_JUEGO_CODJUE
PRIMARY KEY(CODJUE);

//PK EN LA TABLA PLATAFORMA

ALTER TABLE PLATAFORMA
ADD CONSTRAINT PK_PLATAFORMA_CODPLA
PRIMARY KEY(CODPLA);

//PK EN LA TABLA GENERO

ALTER TABLE GENERO
ADD CONSTRAINT PK_GENERO_CODGEN
PRIMARY KEY(CODGEN);

//FK EN JUEGO CON CODGEN QUE PERTENCE A GENERO

ALTER TABLE JUEGO
ADD CONSTRAINT FK_JUEGO_CODGEN
FOREIGN KEY(CODGEN) REFERENCES
GENERO(CODGEN);

//FK EN JUEGO CON CODGEN QUE PERTENCE A GENERO

ALTER TABLE JUEGO
ADD CONSTRAINT FK_JUEGO_CODPLA
FOREIGN KEY(CODPLA) REFERENCES
PLATAFORMA(CODPLA);

//INSERTAR DATOS EN TABLA PLATAFORMA

INSERT INTO PLATAFORMA VALUES(1, 'PC');
INSERT INTO PLATAFORMA VALUES(2, 'PLAY 4');
INSERT INTO PLATAFORMA VALUES(3, 'NINTENDO 3DS XL');

//CONSULTAR DATOS INSERTADOS EN PLATAFORMA

SELECT * FROM PLATAFORMA;

//INSERTAR DATOS EN TABLA GENERO

INSERT INTO GENERO VALUES(1, 'ACCIÓN');
INSERT INTO GENERO VALUES(2, 'AVENTURA');
INSERT INTO GENERO VALUES(3, 'TERROR');

//CONSULTAR DATOS INSERTADOS EN GENERO

SELECT * FROM GENERO;

//INSERTAR DATOS EN TABLA JUEGO

INSERT INTO JUEGO VALUES(1, 'MARIO BROS', 10, 36990, 3, 2);
INSERT INTO JUEGO VALUES(2, 'CALL OF DUTY', 15, 49990, 1, 1);
INSERT INTO JUEGO VALUES(3, 'OUTLAST', 8, 56990, 2, 3);

//CONSULTAR DATOS INSERTADOS EN JUEGO

SELECT * FROM JUEGO;

//UK EN LA TABLA JUEGO PARA EL CAMPO NOMBRE

ALTER TABLE JUEGO
ADD CONSTRAINT UK_JUEGO_NOMBRE
UNIQUE(NOMBRE);

//INTENTAMOS INSERTAR UN NUEVO REGISTRO CON EL NOMBRE MARIO BROS PARA VER QUE SUCEDE

INSERT INTO JUEGO VALUES(4, 'MARIO BROS', 25, 32990, 3, 2);

//ORA-00001: unique constraint (JUEGOS2.UK_JUEGO_NOMBRE) violated
//NO PERMITIRA INGRESAR EL REGISTRO YA QUE YA EXISTE EL JUEGO CON EL NOMBRE MARIO BROS

//CK EN LA TABLA JUEGO PARA QUE AL INGRESAR UN NUEVO REGISTRO NO PERMITA GUARDARLO CON STOCK IGUAL A 0

ALTER TABLE JUEGO
ADD CONSTRAINT CK_JUEGO_STOCK
CHECK (STOCK>0);

//INTENTAMOS INSERTAR UN NUEVO REGISTRO CON EL STOCK = 0 PARA VER QUE SUCEDE

INSERT INTO JUEGO VALUES (4, 'ZELDA', 0, 25000, 3, 2);

//ORA-02290: check constraint (JUEGOS2.CK_JUEGO_STOCK) violated
//NO PERMITIRA INSERTAR EL REGISTRO YA QUE EL CK DICE QUE EL STOCK DEBE SER MAYOR A 0

//CONSULTAMOS LOS DATOS DE LA TABLA JUEGO

SELECT * FROM JUEGO;